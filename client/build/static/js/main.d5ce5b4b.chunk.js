(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,t,a){},30:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(1),n=a.n(s),r=a(21),i=a.n(r),l=(a(29),a.p,a(30),a(31),a(4)),o=a(2),d=a(9),j=a(11),b=a(23),u=a(5),m=a.n(u);var h=function(e){var t=Object(s.useState)([]),a=Object(o.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(""),u=Object(o.a)(i,2),h=u[0],O=u[1];function x(){m.a.get("http://localhost:8000/api/restaurants").then((function(e){console.log(e),r(function(e){for(var t=Object(b.a)(e),a=0;a<t.length;a++)for(var c=0;c<t.length-a-1;c++)if(t[c].avgRating<t[c+1].avgRating){var s=[t[c+1],t[c]];t[c]=s[0],t[c+1]=s[1]}return t}(function(e){var t,a=[],c=Object(j.a)(e);try{for(c.s();!(t=c.n()).done;){var s=t.value;if(s.reviews.length<1)a.push(Object(d.a)(Object(d.a)({},s),{},{avgRating:0}));else{var n,r=0,i=Object(j.a)(s.reviews);try{for(i.s();!(n=i.n()).done;)r+=n.value.rating}catch(l){i.e(l)}finally{i.f()}a.push(Object(d.a)(Object(d.a)({},s),{},{avgRating:r/s.reviews.length}))}}}catch(l){c.e(l)}finally{c.f()}return a}(e.data)))})).catch((function(e){return console.error(e)}))}Object(s.useEffect)((function(){x()}),[]);return Object(c.jsxs)("div",{className:"row my-3",children:[Object(c.jsx)("div",{className:"col-sm-6 offset-sm-3",children:Object(c.jsx)("input",{type:"search",placeholder:"search",name:"q",className:"form-control my-3",value:h,onChange:function(e){return O(e.target.value)}})}),n.filter((function(e){return e.name.toLowerCase().includes(h.toLowerCase())})).length<1?Object(c.jsx)("p",{className:"col-sm-12",children:"No results"}):"",n.filter((function(e){return e.name.toLowerCase().includes(h.toLowerCase())})).map((function(e){return Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsxs)("div",{className:"card mt-3",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:e.name}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsxs)("p",{children:["Cuisine: ",e.cuisine]}),Object(c.jsxs)("p",{children:["Year Established: ",e.yearEstablished]}),Object(c.jsxs)("p",{children:["Description: ",e.description]}),Object(c.jsxs)("p",{children:["Average Rating: ",e.avgRating?e.avgRating.toFixed(1):"no reviews yet :("]}),Object(c.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(c.jsx)(l.a,{to:"/view/".concat(e._id),className:"btn btn-outline-success",children:"View"}),Object(c.jsx)(l.a,{to:"/edit/".concat(e._id),className:"btn btn-outline-info",children:"Edit"}),Object(c.jsx)("button",{className:"btn btn-outline-danger",onClick:function(t){return a=e._id,void m.a.delete("http://localhost:8000/api/restaurants/".concat(a)).then((function(e){console.log(e),x()})).catch((function(e){return console.error(e)}));var a},children:"Remove"})]})]})]})},e._id)}))]})},O=function(e){var t=Object(s.useState)(""),a=Object(o.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(""),d=Object(o.a)(i,2),j=d[0],b=d[1],u=Object(s.useState)(2e3),h=Object(o.a)(u,2),O=h[0],x=h[1],f=Object(s.useState)(""),p=Object(o.a)(f,2),v=p[0],g=p[1],N=Object(s.useState)({}),y=Object(o.a)(N,2),E=y[0],w=y[1];return Object(c.jsx)("div",{className:"row my-5",children:Object(c.jsx)("div",{className:"col-sm-8 offset-sm-2",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:"Add Restaurant"}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:n,cuisine:j,yearEstablished:O,description:v};m.a.post("http://localhost:8000/api/restaurants",t).then((function(e){console.log(e),e.data.errors?w(e.data.errors):Object(l.c)("/")})).catch((function(e){console.error(e)}))},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Name:"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"name",value:n,onChange:function(e){return r(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:E.name?E.name.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Cuisine:"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"cuisine",value:j,onChange:function(e){return b(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:E.cuisine?E.cuisine.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Year Established:"}),Object(c.jsx)("input",{type:"number",className:"form-control",name:"yearEstablished",value:O,onChange:function(e){return x(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:E.yearEstablished?E.yearEstablished.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Description:"}),Object(c.jsx)("textarea",{name:"description",className:"form-control",value:v,onChange:function(e){return g(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:E.description?E.description.message:""})]}),Object(c.jsx)("input",{type:"submit",value:"Add Restaurant",className:"btn btn-info btn-block"})]})})]})})})},x=function(e){var t=Object(s.useState)(""),a=Object(o.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(""),d=Object(o.a)(i,2),j=d[0],b=d[1],u=Object(s.useState)(2e3),h=Object(o.a)(u,2),O=h[0],x=h[1],f=Object(s.useState)(""),p=Object(o.a)(f,2),v=p[0],g=p[1],N=Object(s.useState)({}),y=Object(o.a)(N,2),E=y[0],w=y[1];Object(s.useEffect)((function(){console.log(e._id),m.a.get("http://localhost:8000/api/restaurants/".concat(e._id)).then((function(e){console.log(e),r(e.data.name),b(e.data.cuisine),x(e.data.yearEstablished),g(e.data.description)})).catch((function(e){return console.error(e)}))}),[e._id]);return Object(c.jsx)("div",{className:"row my-5",children:Object(c.jsx)("div",{className:"col-sm-8 offset-sm-2",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:"Update Restaurant"}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a={name:n,cuisine:j,yearEstablished:O,description:v};m.a.put("http://localhost:8000/api/restaurants/".concat(e._id),a).then((function(e){console.log(e),e.data.errors?w(e.data.errors):Object(l.c)("/")})).catch((function(e){console.error(e)}))},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Name:"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"name",value:n,onChange:function(e){return r(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:E.name?E.name.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Cuisine:"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"cuisine",value:j,onChange:function(e){return b(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:E.cuisine?E.cuisine.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Year Established:"}),Object(c.jsx)("input",{type:"number",className:"form-control",name:"yearEstablished",value:O,onChange:function(e){return x(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:E.yearEstablished?E.yearEstablished.message:""})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Description:"}),Object(c.jsx)("textarea",{name:"description",className:"form-control",value:v,onChange:function(e){return g(e.target.value)}}),Object(c.jsx)("p",{className:"text-danger",children:E.description?E.description.message:""})]}),Object(c.jsx)("input",{type:"submit",value:"Update Restaurant",className:"btn btn-info btn-block"})]})})]})})})},f=function(e){var t=Object(s.useState)(""),a=Object(o.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(""),d=Object(o.a)(i,2),j=d[0],b=d[1],u=Object(s.useState)(2e3),h=Object(o.a)(u,2),O=h[0],x=h[1],f=Object(s.useState)(""),p=Object(o.a)(f,2),v=p[0],g=p[1];return Object(s.useEffect)((function(){console.log(e._id),m.a.get("http://localhost:8000/api/restaurants/".concat(e._id)).then((function(e){console.log(e),r(e.data.name),b(e.data.cuisine),x(e.data.yearEstablished),g(e.data.description)})).catch((function(e){return console.error(e)}))}),[e._id]),Object(c.jsx)("div",{className:"row my-5",children:Object(c.jsx)("div",{className:"col-sm-8 offset-sm-2",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("div",{className:"card-header bg-dark text-light",children:"View Restaurant"}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Name:"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"name",value:n,disabled:!0})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Cuisine:"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"cuisine",value:j,disabled:!0})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Year Established:"}),Object(c.jsx)("input",{type:"number",className:"form-control",name:"yearEstablished",value:O,disabled:!0})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Description:"}),Object(c.jsx)("textarea",{name:"description",className:"form-control",value:v,disabled:!0})]}),Object(c.jsx)("div",{className:"col-sm-12",children:Object(c.jsx)(l.a,{to:"/edit/".concat(e._id),className:"btn btn-outline-info",children:"Edit"})})]})]})})})};var p=function(){return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("h1",{children:[Object(c.jsx)("span",{className:"text-info",children:"REST"}),"aurants"]}),Object(c.jsx)(l.a,{to:"/",className:"btn btn-outline-primary",children:"View All"}),Object(c.jsx)(l.a,{to:"/new",className:"btn btn-outline-primary",children:"Add Restauraunt"}),Object(c.jsxs)(l.b,{children:[Object(c.jsx)(h,{path:"/"}),Object(c.jsx)(O,{path:"/new"}),Object(c.jsx)(x,{path:"/edit/:_id"}),Object(c.jsx)(f,{path:"/view/:_id"})]})]})},v=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,56)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),s(e),n(e),r(e)}))};i.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root")),v()}},[[55,1,2]]]);
//# sourceMappingURL=main.d5ce5b4b.chunk.js.map